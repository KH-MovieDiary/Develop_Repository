<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="memberMapper">

	<select id="idCheck" parameterType="string" resultType="_int">
  		SELECT COUNT(*)
  		FROM MEMBER
  		WHERE USER_ID = #{userId}
  	</select>
  	
  	<select id="nickCheck" parameterType="string" resultType="_int">
  		SELECT COUNT(*)
  		FROM MEMBER
  		WHERE NICKNAME = #{nickName}
  	</select>
  	
  	<insert id="insertMember" parameterType="Member">
	    INSERT INTO MEMBER (
	        USER_ID
	        , USER_PWD
	        , EMAIL
	        , BIRTHDAY
	        , GENDER
	        , NICKNAME
	        , FAVORITE_GENRE
	        , PICTURE
	    )
	    VALUES (
	        #{userId}
	        , #{userPwd}
	        , #{email}
	        , #{birthday}
	        , #{gender}
	        , #{nickName}
	        , #{favoriteGenre}
	        , #{picture}
	    )
	</insert>
	
	<select id="loginUser" resultType="Member">
		SELECT   USER_ID
				,USER_PWD
				,EMAIL
				,GENDER
				,NICKNAME
				,FAVORITE_GENRE
				,CREATE_DATE
				,UPDATE_DATE
				,PICTURE
				,STATUS
				,TO_CHAR(BIRTHDAY, 'YYYY-MM-DD') AS BIRTHDAY
		FROM MEMBER
		WHERE USER_ID = #{userId}
		AND STATUS = 'Y'

	</select>
	
	<update id="updateUser" parameterType="Member">
		UPDATE MEMBER
		SET  BIRTHDAY = #{birthday}
			,EMAIL = #{email}
			,GENDER = #{gender}
			,FAVORITE_GENRE = #{favoriteGenre}
			,PICTURE = #{picture}
			,UPDATE_DATE = SYSDATE
		WHERE USER_ID = #{userId}
		AND STATUS = 'Y'
	</update>
	
	<update id="deleteMember" parameterType="string">
  		UPDATE MEMBER
  		SET STATUS = 'N'
  		,UPDATE_DATE = SYSDATE
  		WHERE USER_ID = #{userId}
  	</update>




</mapper>

