<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="reviewMapper">
 
 <insert id="reviewInsert" parameterType="Review">
 	INSERT INTO REVIEW
 	VALUES(SEQ_RENO.NEXTVAL
 		   ,#{content}
 		   ,SYSDATE
 		   ,SYSDATE
 		   ,0
 		   ,0
 		   ,(SELECT MOVIE_ID
			FROM MOVIE
			WHERE MOVIE_TITLE = #{movieTitle})
		   ,#{userId}
		   )
		   
 </insert>
 
 <select id="listCount" resultType="_int">
 	SELECT COUNT(*)
 	FROM REVIEW
 </select>
 
 <select id="reviewList" resultType="ReviewList">
 	SELECT REVIEW_ID
 		  ,MOVIE_ID
 		  ,NICKNAME
 		  ,VIEW_COUNT
 		  ,LIKE_COUNT
 		  ,R.CREATE_DATE
 		  ,REVIEW_TITLE
 	FROM REVIEW R
 	JOIN MEMBER M USING(USER_ID)
 </select>
   

</mapper>

